<!DOCTYPE html>
<html lang="en" dir="ltr">

<head>
    <meta charset="utf-8">
    <link rel="stylesheet" href="styles.css">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Roboto:wght@100&display=swap" rel="stylesheet">
    <title>Kustomer Home - AI</title>
</head>

<body>
    <h1>Kustomer.com Chat testing</h1>
</body>
<script src="https://cdn.kustomerapp.com/chat-web/widget.js"
    data-kustomer-api-key='eyJhbGciOiJub25lIn0.eyJvcmciOiI2MDUyOWRiOWI3OTM0MjFhYzRlNDIxZmYiLCJvcmdOYW1lIjoia3VzdG9tZXItc2FuZGJveCIsInJvbGVzIjpbIm9yZy50cmFja2luZyJdfQ.'></script>
<script>
    Kustomer.start({
        brandId: '667d58f9ff76a7118aa60140',
        hideNewConversationButtonOnHistory: true
    }, function () {
        Kustomer.addListener('onOpen', (res) => {
            Kustomer.getOpenConversations((conversations, error) => {
                //if current conversations exist, open to existing conversation
                if (conversations[0] && conversations[0].conversationId !== null) {
                    console.log(conversations[0].conversationId);
                    Kustomer.openConversationById({
                        conversationId: `${conversations[0].conversationId}`
                    }, (response, error) => {
                        if (error) {
                            console.error(error);
                        } else {
                            console.log('Successfully opened conversation');
                        }
                    });
                } else {
                    console.log('none');
                    Kustomer.createConversation()
                }

            });
        });
    })

</script>

</html>
